---
import type { CollectionEntry } from "astro:content";
import { getBlogPosts } from "src/utils";
import BaseLayout from "$layouts/BaseLayout.astro";
import ProseWrapper from "$layouts/ProseWrapper.astro";
import Navbar from "$components/Navigation/Navbar.svelte";

export async function getStaticPaths() {
  const posts = await getBlogPosts();
  return posts.map((post: CollectionEntry<"blog">) => ({
    params: { slug: post.slug },
    props: post,
  }));
}

const _post = Astro.props;
const { Content } = await _post.render();
---

<BaseLayout {..._post.data}>
  <Navbar client:load />

  <div class="relative isolate overflow-hidden bg-background">
    <div class="mx-auto max-w-4xl px-6 lg:px-8">
      <div class="py-16 md:py-32">
        <div class="max-w-3xl">
          <h1
            class="text-4xl font-bold tracking-tight text-base-800 dark:text-base-100 sm:text-5xl mb-8"
          >
            {_post.data.title}
          </h1>

          {
            _post.data.description && (
              <p class="text-lg text-base-600 dark:text-base-400 mb-8">
                {_post.data.description}
              </p>
            )
          }

          <div class="text-sm text-base-500 dark:text-base-500 mb-12">
            {
              _post.data.pubDate.toLocaleDateString("en-US", {
                year: "numeric",
                month: "long",
                day: "numeric",
              })
            }
          </div>

          <ProseWrapper>
            <Content />
          </ProseWrapper>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>
