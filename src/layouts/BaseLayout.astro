---
import BaseHead from "../components/BaseHead.astro";
import BackToTop from "$components/ui/BackToTop.svelte";
import ClarityLoader from "$components/ClarityLoader.svelte";
import { getLangFromUrl } from "../i18n/ui";
const isProd = import.meta.env.PROD;

const {
  title: _title,
  description: _description,
  image: _image,
  backToTop = true,
} = Astro.props as any;
const lang = getLangFromUrl(Astro.url);
---

<!doctype html>
<html lang={lang} class="h-full antialiased dark">
  <head>
    <BaseHead title={_title} description={_description} image={_image} />
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4257977776766051"
      crossorigin="anonymous"></script>

    <style is:global>
      html.dark .astro-code,
      html.dark .astro-code span {
        color: var(--shiki-dark) !important;
        /* Optional, if you also want font styles */
        font-style: var(--shiki-dark-font-style) !important;
        font-weight: var(--shiki-dark-font-weight) !important;
        text-decoration: var(--shiki-dark-text-decoration) !important;
      }

      pre {
        border: 1px solid rgba(0, 0, 0, 0.1);
        background-color: rgba(0, 0, 0, 0.03) !important;
        border-radius: 0.75rem !important;
      }

      html.dark pre {
        border: 1px solid rgba(255, 255, 255, 0.1);
        background-color: rgba(255, 255, 255, 0.05) !important;
        border-radius: 0.75rem !important;
      }
    </style>
  </head>

  <body
    class="w-full h-full bg-white dark:bg-base-950 transition-colors duration-150 dark:transition-color dark:duration-150 pb-20 md:pb-0"
  >
    <slot />
    {isProd && <ClarityLoader client:load />}
    {backToTop && <BackToTop client:load />}
  </body>
</html>
